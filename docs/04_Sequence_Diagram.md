# π§Ύ 04_Sequence_Diagrams


## π’° ν¬μΈνΈ μ΅°ν API

![ν¬μΈνΈ μ΅°ν API](img/sequence_diagram_getpoint.png)

---

## π’° ν¬μΈνΈ μ¶©μ „ API

![ν¬μΈνΈ μ¶©μ „ API](img/sequence_diagram_charge.png)

---

## π“¦ μƒν’ μ΅°ν API

![μƒν’ μ΅°ν API](img/sequence_diagram_getproduct.png)

---

## π” μ£Όλ¬Έ/κ²°μ  API

![μ£Όλ¬Έ/κ²°μ  API](img/sequence_diagram_order.png)

---

## ποΈ μ„ μ°©μ μΏ ν° λ°κΈ‰ API

- μ„ μ°©μ μΏ ν° λ°κΈ‰μ€ λ‹¤μμ μ‚¬μ©μ λ™μ‹ μ”μ²­μ΄ λ“¤μ–΄μ¬ μ μμ 
- π‘‰ μ¬κ³  μ°¨κ° μ‹ νΈλμ­μ… & λ½ μ²λ¦¬ κ°™μ€ λ™μ‹μ„± μ μ–΄ μ¤‘μ” !


![μ„ μ°©μ μΏ ν° λ°κΈ‰ API](img/sequence_diagram_coupon.png)


---

## π“ μΈκΈ° μƒν’ μ΅°ν API

### β… λ°°μΉλ΅ μ‚¬μ „ μ§‘κ³„ β†’ ν†µκ³„ ν…μ΄λΈ”μ— μ €μ¥ β†’ APIλ” κ·Έ ν…μ΄λΈ”λ§ μ΅°ν

1. π”„ λ°°μΉ ν”„λ΅μ„Έμ¤: μ£ΌκΈ°μ μΌλ΅ λ°μ΄ν„°λ¥Ό μ΅°νν•μ—¬ μΈκΈ° μƒν’μ„ μ§‘κ³„
2. π“ ν†µκ³„ ν…μ΄λΈ”: μ§‘κ³„λ μΈκΈ° μƒν’ μ •λ³΄λ¥Ό μ €μ¥
3. β΅ API μ”μ²­: μ‚¬μ©μ μ”μ²­ μ‹, μ΄λ―Έ κ³„μ‚°λ ν†µκ³„ ν…μ΄λΈ”μ—μ„ λ°”λ΅ μ‘λ‹µ

![μΈκΈ° μƒν’ μ΅°ν API](img/sequence_diagram_top_product.png)

<br>

---

### * λ‹¤μ΄μ–΄κ·Έλ¨ λ„κµ¬: [mermaidchart.com](https://www.mermaidchart.com/)

#### π’° ν¬μΈνΈ μ΅°ν API

```mermaid
sequenceDiagram
    actor μ‚¬μ©μ
    participant ν¬μΈνΈ μ„λΉ„μ¤
    participant ν¬μΈνΈ κ³„μΆ

    μ‚¬μ©μ->>ν¬μΈνΈ μ„λΉ„μ¤: λ³΄μ  ν¬μΈνΈ μ΅°ν μ”μ²­

    alt μ ν¨ν• μ‚¬μ©μμΌ κ²½μ°
        ν¬μΈνΈ μ„λΉ„μ¤->>ν¬μΈνΈ κ³„μΆ: μ‚¬μ©μ IDλ΅ ν¬μΈνΈ μ΅°ν
        ν¬μΈνΈ κ³„μΆ-->>ν¬μΈνΈ μ„λΉ„μ¤: λ³΄μ  ν¬μΈνΈ λ°ν™
        ν¬μΈνΈ μ„λΉ„μ¤-->>μ‚¬μ©μ: ν¬μΈνΈ μ΅°ν μ„±κ³µ μ‘λ‹µ (μ”μ•΅ ν¬ν•¨)
    else μ‚¬μ©μ μ •λ³΄ μ—†μ or μ΅°ν μ‹¤ν¨
        ν¬μΈνΈ μ„λΉ„μ¤-->>μ‚¬μ©μ: ν¬μΈνΈ μ΅°ν μ‹¤ν¨ μ‘λ‹µ
    end
```

#### π’° ν¬μΈνΈ μ¶©μ „ API

```mermaid
sequenceDiagram
    actor μ‚¬μ©μ
    participant ν¬μΈνΈ μ„λΉ„μ¤
    participant ν¬μΈνΈ κ³„μΆ
    participant ν¬μΈνΈ λ‚΄μ—­

    μ‚¬μ©μ->>ν¬μΈνΈ μ„λΉ„μ¤: ν¬μΈνΈ μ¶©μ „ μ”μ²­ (κΈμ•΅)

    alt μ ν¨ν• μ”μ²­μΌ κ²½μ°
        ν¬μΈνΈ μ„λΉ„μ¤->>ν¬μΈνΈ κ³„μΆ: ν¬μΈνΈ μ¦κ°€ μ”μ²­
        ν¬μΈνΈ κ³„μΆ-->>ν¬μΈνΈ μ„λΉ„μ¤: λ°μλ μ”μ•΅ λ°ν™

        ν¬μΈνΈ μ„λΉ„μ¤->>ν¬μΈνΈ λ‚΄μ—­: μ¶©μ „ κΈ°λ΅ μ €μ¥
        ν¬μΈνΈ λ‚΄μ—­-->>ν¬μΈνΈ μ„λΉ„μ¤: κΈ°λ΅ μ™„λ£ μ‘λ‹µ

        ν¬μΈνΈ μ„λΉ„μ¤-->>μ‚¬μ©μ: μ¶©μ „ μ„±κ³µ μ‘λ‹µ (ν„μ¬ μ”μ•΅ ν¬ν•¨)
    else μ¶©μ „ κΈμ•΅μ΄ 0 μ΄ν• λλ” μ‚¬μ©μ μ—†μ
        ν¬μΈνΈ μ„λΉ„μ¤-->>μ‚¬μ©μ: μ¶©μ „ μ‹¤ν¨ μ‘λ‹µ
    end
```

#### π“¦ μƒν’ μ΅°ν API
```mermaid
sequenceDiagram
    actor μ‚¬μ©μ
    participant μƒν’ μ„λΉ„μ¤
    participant μƒν’ μµμ…

    μ‚¬μ©μ->>μƒν’ μ„λΉ„μ¤: μƒν’ μ΅°ν μ”μ²­

    alt μ΅°ν μ„±κ³µ
        μƒν’ μ„λΉ„μ¤->>μƒν’ μµμ…: μµμ… λ° μ¬κ³  μ •λ³΄ μ΅°ν
        μƒν’ μµμ…-->>μƒν’ μ„λΉ„μ¤: μµμ… λ° μ¬κ³  μ •λ³΄ λ°ν™

        μƒν’ μ„λΉ„μ¤-->>μ‚¬μ©μ: μƒν’ + μµμ… μ΅°ν μ„±κ³µ μ‘λ‹µ
    else μ¤λ¥ λ°μƒ
        μƒν’ μ„λΉ„μ¤-->>μ‚¬μ©μ: μ΅°ν μ‹¤ν¨ μ‘λ‹µ
    end
```

#### π” μ£Όλ¬Έ/κ²°μ  API
```mermaid
sequenceDiagram
    actor μ‚¬μ©μ
    participant μ£Όλ¬Έ μ„λΉ„μ¤
    participant ν¬μΈνΈ κ³„μΆ
    participant μΏ ν°
    participant μ¬κ³  μ‹μ¤ν…
    participant μ£Όλ¬Έ κΈ°λ΅
    participant μ™Έλ¶€ λ°μ΄ν„° ν”λ«νΌ

    μ‚¬μ©μ->>μ£Όλ¬Έ μ„λΉ„μ¤: μ£Όλ¬Έ μ”μ²­ (μƒν’, μλ‰, μΏ ν° ID)

    alt μ ν¨ν• μ”μ²­μΌ κ²½μ°
        μ£Όλ¬Έ μ„λΉ„μ¤->>μ¬κ³  μ‹μ¤ν…: μ¬κ³  μ°¨κ° μ”μ²­
        μ¬κ³  μ‹μ¤ν…-->>μ£Όλ¬Έ μ„λΉ„μ¤: μ¬κ³  μ°¨κ° μ„±κ³µ

        μ£Όλ¬Έ μ„λΉ„μ¤->>μΏ ν°: μΏ ν° μ ν¨μ„± ν™•μΈ λ° μ‚¬μ© μ²λ¦¬
        μΏ ν°-->>μ£Όλ¬Έ μ„λΉ„μ¤: μΏ ν° μ μ© κ²°κ³Ό λ°ν™

        μ£Όλ¬Έ μ„λΉ„μ¤->>ν¬μΈνΈ κ³„μΆ: κ²°μ  κΈμ•΅λ§νΌ ν¬μΈνΈ μ°¨κ°
        ν¬μΈνΈ κ³„μΆ-->>μ£Όλ¬Έ μ„λΉ„μ¤: μ°¨κ° κ²°κ³Ό λ°ν™

        μ£Όλ¬Έ μ„λΉ„μ¤->>μ£Όλ¬Έ κΈ°λ΅: μ£Όλ¬Έ μ €μ¥
        μ£Όλ¬Έ κΈ°λ΅-->>μ£Όλ¬Έ μ„λΉ„μ¤: μ£Όλ¬Έ ID λ°ν™

        μ£Όλ¬Έ μ„λΉ„μ¤->>μ™Έλ¶€ λ°μ΄ν„° ν”λ«νΌ: μ£Όλ¬Έ μ •λ³΄ μ „μ†΅
        μ™Έλ¶€ λ°μ΄ν„° ν”λ«νΌ-->>μ£Όλ¬Έ μ„λΉ„μ¤: μ „μ†΅ μ™„λ£

        μ£Όλ¬Έ μ„λΉ„μ¤-->>μ‚¬μ©μ: μ£Όλ¬Έ μ™„λ£ μ‘λ‹µ (μ£Όλ¬Έ ID ν¬ν•¨)
    else μ¬κ³  λ¶€μ΅± or ν¬μΈνΈ λ¶€μ΅± or μΏ ν° μ¤λ¥
        μ£Όλ¬Έ μ„λΉ„μ¤-->>μ‚¬μ©μ: μ£Όλ¬Έ μ‹¤ν¨ μ‘λ‹µ
    end
```

#### ποΈ μ„ μ°©μ μΏ ν° λ°κΈ‰ API
```mermaid
sequenceDiagram
    actor μ‚¬μ©μ
    participant μΏ ν° μ„λΉ„μ¤
    participant μΏ ν° μ¬κ³ 
    participant μ‚¬μ©μ μΏ ν° λ©λ΅

    μ‚¬μ©μ->>μΏ ν° μ„λΉ„μ¤: μΏ ν° λ°κΈ‰ μ”μ²­

    alt μ”μ—¬ μΏ ν° μμ
        μΏ ν° μ„λΉ„μ¤->>μΏ ν° μ¬κ³ : λ°κΈ‰ κ°€λ¥ν•μ§€ ν™•μΈ
        μΏ ν° μ¬κ³ -->>μΏ ν° μ„λΉ„μ¤: λ°κΈ‰ κ°€λ¥

        μΏ ν° μ„λΉ„μ¤->>μΏ ν° μ¬κ³ : μ¬κ³  μ°¨κ°
        μΏ ν° μ¬κ³ -->>μΏ ν° μ„λΉ„μ¤: μ°¨κ° μ™„λ£

        μΏ ν° μ„λΉ„μ¤->>μ‚¬μ©μ μΏ ν° λ©λ΅: μ‚¬μ©μμ—κ² μΏ ν° λ°κΈ‰
        μ‚¬μ©μ μΏ ν° λ©λ΅-->>μΏ ν° μ„λΉ„μ¤: λ°κΈ‰ μ™„λ£

        μΏ ν° μ„λΉ„μ¤-->>μ‚¬μ©μ: μΏ ν° λ°κΈ‰ μ„±κ³µ μ‘λ‹µ
    else μΏ ν° μ†μ§„ or μ¤‘λ³µ λ°κΈ‰ μ”μ²­
        μΏ ν° μ„λΉ„μ¤-->>μ‚¬μ©μ: μΏ ν° λ°κΈ‰ μ‹¤ν¨ μ‘λ‹µ
    end
```

#### π“ μΈκΈ° μƒν’ μ΅°ν API
```mermaid
sequenceDiagram
    participant ν†µκ³„ λ°°μΉ ν”„λ΅μ„Έμ¤
    participant μ£Όλ¬Έ κΈ°λ΅
    participant ν†µκ³„ ν…μ΄λΈ”

    participant μ‚¬μ©μ
    participant μΈκΈ° μƒν’ API

    %% λ°°μΉ ν”„λ΅μ„Έμ¤ νλ¦„
    loop 1μ‹κ°„
        ν†µκ³„ λ°°μΉ ν”„λ΅μ„Έμ¤->>μ£Όλ¬Έ κΈ°λ΅: μµκ·Ό 3μΌ μ£Όλ¬Έ λ‚΄μ—­ μ΅°ν
        μ£Όλ¬Έ κΈ°λ΅-->>ν†µκ³„ λ°°μΉ ν”„λ΅μ„Έμ¤: μ£Όλ¬Έ λ°μ΄ν„° λ°ν™
        ν†µκ³„ λ°°μΉ ν”„λ΅μ„Έμ¤->>ν†µκ³„ ν…μ΄λΈ”: μΈκΈ° μƒν’ μ§‘κ³„ κ²°κ³Ό μ €μ¥
    end

    %% μ‚¬μ©μ μ”μ²­ νλ¦„
    μ‚¬μ©μ->>μΈκΈ° μƒν’ API: μΈκΈ° μƒν’ μ΅°ν μ”μ²­
    μΈκΈ° μƒν’ API->>ν†µκ³„ ν…μ΄λΈ”: μƒμ„ 5κ° μƒν’ μ΅°ν
    ν†µκ³„ ν…μ΄λΈ”-->>μΈκΈ° μƒν’ API: μΈκΈ° μƒν’ λ°μ΄ν„° λ°ν™
    μΈκΈ° μƒν’ API-->>μ‚¬μ©μ: μΈκΈ° μƒν’ μ‘λ‹µ
```